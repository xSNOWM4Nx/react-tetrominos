// Types
import type { TetrominoType, TetrominoShape, Tetromino, TetrominoColor } from "./types.js";

// All shapes in a 4x4 grid, 1 = block, 0 = empty
export const TETROMINO_SHAPES: Record<TetrominoType, TetrominoShape[]> = {
    I: [
        [
            [0, 0, 0, 0],
            [1, 1, 1, 1],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 1, 0],
            [0, 0, 1, 0],
            [0, 0, 1, 0],
            [0, 0, 1, 0],
        ],
        [
            [0, 0, 0, 0],
            [0, 0, 0, 0],
            [1, 1, 1, 1],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 1, 0, 0],
        ],
    ],
    O: [
        [
            [0, 1, 1, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        // O-Block does not change shape on rotation
        [
            [0, 1, 1, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 1, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 1, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
    T: [
        [
            [0, 1, 0, 0],
            [1, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [0, 1, 1, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 0, 0],
            [1, 1, 1, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [1, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
    S: [
        [
            [0, 1, 1, 0],
            [1, 1, 0, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [0, 1, 1, 0],
            [0, 0, 1, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 0, 0],
            [0, 1, 1, 0],
            [1, 1, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [1, 0, 0, 0],
            [1, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
    Z: [
        [
            [1, 1, 0, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 1, 0],
            [0, 1, 1, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 0, 0],
            [1, 1, 0, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [1, 1, 0, 0],
            [1, 0, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
    J: [
        [
            [1, 0, 0, 0],
            [1, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 1, 0],
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 0, 0],
            [1, 1, 1, 0],
            [0, 0, 1, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [1, 1, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
    L: [
        [
            [0, 0, 1, 0],
            [1, 1, 1, 0],
            [0, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0],
        ],
        [
            [0, 0, 0, 0],
            [1, 1, 1, 0],
            [1, 0, 0, 0],
            [0, 0, 0, 0],
        ],
        [
            [1, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 1, 0, 0],
            [0, 0, 0, 0],
        ],
    ],
};

export const TETROMINO_COLORS: Record<TetrominoType, TetrominoColor> = {
    I: '#00f0f0', // Cyan
    O: '#f0f000', // Yellow
    T: '#a000f0', // Lilac
    S: '#00f000', // Green
    Z: '#f00000', // Red
    J: '#0000f0', // Blue
    L: '#f0a000', // Orange
};

// SRS wallkicks for standard tetrominos (J, L, S, T, Z)
export const SRS_WALLKICKS: { [key: string]: [number, number][] } = {
    "0>R": [[0, 0], [-1, 0], [-1, 1], [0, -2], [-1, -2]],
    "R>0": [[0, 0], [1, 0], [1, -1], [0, 2], [1, 2]],
    "R>2": [[0, 0], [1, 0], [1, -1], [0, 2], [1, 2]],
    "2>R": [[0, 0], [-1, 0], [-1, 1], [0, -2], [-1, -2]],
    "2>L": [[0, 0], [1, 0], [1, 1], [0, -2], [1, -2]],
    "L>2": [[0, 0], [-1, 0], [-1, -1], [0, 2], [-1, 2]],
    "L>0": [[0, 0], [-1, 0], [-1, -1], [0, 2], [-1, 2]],
    "0>L": [[0, 0], [1, 0], [1, 1], [0, -2], [1, -2]],
};

// SRS wallkicks for I tetromino
export const SRS_WALLKICKS_I: { [key: string]: [number, number][] } = {
    "0>R": [[0, 0], [-2, 0], [1, 0], [-2, -1], [1, 2]],
    "R>0": [[0, 0], [2, 0], [-1, 0], [2, 1], [-1, -2]],
    "R>2": [[0, 0], [-1, 0], [2, 0], [-1, 2], [2, -1]],
    "2>R": [[0, 0], [1, 0], [-2, 0], [1, -2], [-2, 1]],
    "2>L": [[0, 0], [2, 0], [-1, 0], [2, 1], [-1, -2]],
    "L>2": [[0, 0], [-2, 0], [1, 0], [-2, -1], [1, 2]],
    "L>0": [[0, 0], [1, 0], [-2, 0], [1, -2], [-2, 1]],
    "0>L": [[0, 0], [-1, 0], [2, 0], [-1, 2], [2, -1]],
};
