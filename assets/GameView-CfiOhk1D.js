import{g as xt,a as ut,r as x,b as gt,u as ot,c as vt,j as e,s as $,d as O,e as j,f as nt,B as ht,h as ft,m as U,i as P,k as mt,C as yt,l as bt,n as E,A as W,S as H,G as R,R as K,o as a,F as G,T as v,p as St,q as M,V as k,H as wt,t as jt,v as V}from"./index-kRdJvUjj.js";import{C as rt,a as at}from"./CardContent-BMkhYEc0.js";function Ct(t){return ut("MuiButton",t)}const D=xt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),It=x.createContext({}),zt=x.createContext(void 0),Bt=t=>{const{color:o,disableElevation:n,fullWidth:r,size:f,variant:h,loading:d,loadingPosition:c,classes:u}=t,m={root:["root",d&&"loading",h,`${h}${j(o)}`,`size${j(f)}`,`${h}Size${j(f)}`,`color${j(o)}`,n&&"disableElevation",r&&"fullWidth",d&&`loadingPosition${j(c)}`],startIcon:["icon","startIcon",`iconSize${j(f)}`],endIcon:["icon","endIcon",`iconSize${j(f)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},y=nt(m,Ct,u);return{...u,...y}},it=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Dt=$(ht,{shouldForwardProp:t=>ft(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.variant],o[`${n.variant}${j(n.color)}`],o[`size${j(n.size)}`],o[`${n.variant}Size${j(n.size)}`],n.color==="inherit"&&o.colorInherit,n.disableElevation&&o.disableElevation,n.fullWidth&&o.fullWidth,n.loading&&o.loading]}})(U(({theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${D.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${D.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${D.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${D.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(mt()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:P(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:P(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:P(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:o,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:P(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:P(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${D.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${D.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${D.loading}`]:{color:"transparent"}}}]}})),Rt=$("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.startIcon,n.loading&&o.startIconLoadingStart,o[`iconSize${j(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...it]})),$t=$("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.endIcon,n.loading&&o.endIconLoadingEnd,o[`iconSize${j(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...it]})),Pt=$("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),J=$("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),N=x.forwardRef(function(o,n){const r=x.useContext(It),f=x.useContext(zt),h=gt(r,o),d=ot({props:h,name:"MuiButton"}),{children:c,color:u="primary",component:m="button",className:y,disabled:S=!1,disableElevation:i=!1,disableFocusRipple:p=!1,endIcon:w,focusVisibleClassName:b,fullWidth:z=!1,id:l,loading:s=null,loadingIndicator:g,loadingPosition:C="center",size:A="medium",startIcon:T,type:F,variant:st="text",...lt}=d,_=vt(l),q=g??e.jsx(yt,{"aria-labelledby":_,color:"inherit",size:16}),B={...d,color:u,component:m,disabled:S,disableElevation:i,disableFocusRipple:p,fullWidth:z,loading:s,loadingIndicator:q,loadingPosition:C,size:A,type:F,variant:st},I=Bt(B),dt=(T||s&&C==="start")&&e.jsx(Rt,{className:I.startIcon,ownerState:B,children:T||e.jsx(J,{className:I.loadingIconPlaceholder,ownerState:B})}),ct=(w||s&&C==="end")&&e.jsx($t,{className:I.endIcon,ownerState:B,children:w||e.jsx(J,{className:I.loadingIconPlaceholder,ownerState:B})}),pt=f||"",X=typeof s=="boolean"?e.jsx("span",{className:I.loadingWrapper,style:{display:"contents"},children:s&&e.jsx(Pt,{className:I.loadingIndicator,ownerState:B,children:q})}):null;return e.jsxs(Dt,{ownerState:B,className:O(r.className,I.root,y,pt),component:m,disabled:S||s,focusRipple:!p,focusVisibleClassName:O(I.focusVisible,b),ref:n,type:F,id:s?_:l,...lt,classes:I,children:[dt,C!=="end"&&X,c,C==="end"&&X,ct]})}),Gt=t=>{const{absolute:o,children:n,classes:r,flexItem:f,light:h,orientation:d,textAlign:c,variant:u}=t;return nt({root:["root",o&&"absolute",u,h&&"light",d==="vertical"&&"vertical",f&&"flexItem",n&&"withChildren",n&&d==="vertical"&&"withChildrenVertical",c==="right"&&d!=="vertical"&&"textAlignRight",c==="left"&&d!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",d==="vertical"&&"wrapperVertical"]},bt,r)},Et=$("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,n.absolute&&o.absolute,o[n.variant],n.light&&o.light,n.orientation==="vertical"&&o.vertical,n.flexItem&&o.flexItem,n.children&&o.withChildren,n.children&&n.orientation==="vertical"&&o.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&o.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&o.textAlignLeft]}})(U(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:P(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:o})=>!!o.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:o})=>o.children&&o.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:o})=>o.orientation==="vertical"&&o.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:o})=>o.textAlign==="right"&&o.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:o})=>o.textAlign==="left"&&o.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),kt=$("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.wrapper,n.orientation==="vertical"&&o.wrapperVertical]}})(U(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),L=x.forwardRef(function(o,n){const r=ot({props:o,name:"MuiDivider"}),{absolute:f=!1,children:h,className:d,orientation:c="horizontal",component:u=h||c==="vertical"?"div":"hr",flexItem:m=!1,light:y=!1,role:S=u!=="hr"?"separator":void 0,textAlign:i="center",variant:p="fullWidth",...w}=r,b={...r,absolute:f,component:u,flexItem:m,light:y,orientation:c,role:S,textAlign:i,variant:p},z=Gt(b);return e.jsx(Et,{as:u,className:O(z.root,d),role:S,ref:n,ownerState:b,"aria-orientation":S==="separator"&&(u!=="hr"||c==="vertical")?c:void 0,...w,children:h?e.jsx(kt,{className:z.wrapper,ownerState:b,children:h}):null})});L&&(L.muiSkipListHighlight=!0);const Q=E(e.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),Y=E(e.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),Z=E(e.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),tt=E(e.jsx("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"})),et=E([e.jsx("path",{d:"M18 6.41 16.59 5 12 9.58 7.41 5 6 6.41l6 6z"},"0"),e.jsx("path",{d:"m18 13-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},"1")]),Lt=t=>{const r=x.useContext(W).getService(H.TetrominosGameService),[f,h]=x.useState(0);x.useEffect(()=>{if(!r)return;const i=r.onGameStateUpdated("GameControl",p=>{h(p)});return()=>{r.offGameStateUpdated(i)}},[r]);const d=()=>e.jsxs(K.Fragment,{children:[e.jsx(a,{sx:{height:16}}),e.jsx(L,{sx:{width:"100%"}}),e.jsx(a,{sx:{height:16}})]}),c=()=>{if(!r)return null;const i=r.getGameData();let p="Start Game";return i.state===R.Paused&&(p="Resume Game"),e.jsx(N,{disabled:i.state===R.Running,variant:"contained",color:"primary",onClick:()=>r.startGame(),sx:{mb:2,width:140},children:p})},u=()=>{if(!r)return null;const i=r.getGameData();return e.jsx(N,{disabled:i.state!==R.Running,variant:"contained",color:"primary",onClick:()=>r.pauseGame(),sx:{mb:2,width:140},children:"Pause Game"})},m=()=>{if(!r)return null;const i=r.getGameData();return e.jsx(N,{disabled:i.state!==R.Running&&i.state!==R.Paused,variant:"contained",color:"primary",onClick:()=>r.stopGame(),sx:{mb:2,width:140},children:"Stop Game"})},y=()=>r?e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(a,{sx:{height:16}}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(G,{color:"secondary",onClick:()=>r.moveLeft(),children:e.jsx(Q,{})}),e.jsx(G,{color:"secondary",onClick:()=>r.moveRight(),children:e.jsx(Y,{})})]}),e.jsx(G,{color:"secondary",onClick:()=>r.moveDown(),children:e.jsx(Z,{})})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(G,{color:"secondary",onClick:()=>r.rotate(),children:e.jsx(tt,{})}),e.jsx(G,{color:"secondary",onClick:()=>r.hardDrop(),children:e.jsx(et,{})})]})]}),e.jsx(a,{sx:{height:16}})]}):null,S=()=>e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(v,{variant:"subtitle1",children:"Keyboard Controls"}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(Q,{}),e.jsx(v,{variant:"body2",children:"Left Arrow, A"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(Y,{}),e.jsx(v,{variant:"body2",children:"Right Arrow, D"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(Z,{}),e.jsx(v,{variant:"body2",children:"Down Arrow, S"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(tt,{}),e.jsx(v,{variant:"body2",children:"Up Arrow, W"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(et,{}),e.jsx(v,{variant:"body2",children:"Spacebar"})]})]});return e.jsx(rt,{sx:{borderRadius:2,height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(at,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[c(),u(),m(),d(),y(),d(),S()]})})},Wt=t=>{const n=x.useContext(W).getService(H.TetrominosGameService),[r,f]=x.useState(0),[h,d]=x.useState(0),[c,u]=x.useState(32);x.useEffect(()=>{const l=()=>{const s=window.innerHeight,g=Math.floor((s-32)/k);u(g>0?g:16)};return window.addEventListener("resize",l),l(),()=>window.removeEventListener("resize",l)},[]),x.useEffect(()=>{if(!n)return;const l=n.onGameBoardUpdated("GameBoard",g=>{f(g)}),s=n.onGameStateUpdated("GameBoard",g=>{d(g)});return()=>{n.offGameBoardUpdated(l),n.offGameStateUpdated(s)}},[n]),x.useEffect(()=>{const l=s=>{if(n)switch(s.key){case"ArrowLeft":case"a":s.preventDefault(),n.moveLeft();break;case"ArrowRight":case"d":s.preventDefault(),n.moveRight();break;case"ArrowDown":case"s":s.preventDefault(),n.moveDown();break;case"ArrowUp":case"w":s.preventDefault(),n.rotate();break;case"Space":case" ":s.preventDefault(),n.hardDrop();break}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[n]);const m=(l,s)=>{const g="#0000",C="#f0f";return l!==null?l.color??C:s.state===V.Blink?s.color??"fff":s.value?s.color??C:g},y=l=>l.state===V.Blink?"0 0 4px 2px #fff, 0 0 8px 4px #f0f, 0 0 16px 8px #0ff":"none",S=()=>b.state!==R.Paused?null:e.jsx(a,{id:"pause-overlay",sx:{position:"absolute",top:0,left:0,width:p,height:w,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:e.jsx(a,{sx:l=>({width:"70%",height:200,backgroundColor:l.palette.primary.main,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"}),children:e.jsx(v,{variant:"h2",children:"PAUSED"})})}),i=()=>b.state!==R.GameOver?null:e.jsx(a,{id:"gameover-overlay",sx:{position:"absolute",top:0,left:0,width:p,height:w,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:e.jsx(a,{sx:l=>({width:"70%",height:200,backgroundColor:l.palette.error.main,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"}),children:e.jsx(v,{variant:"h2",children:"GAME OVER"})})}),p=c*M,w=c*k,b=n?n.getGameData():St(k,M),z=b.board.slice(wt);return e.jsxs(a,{sx:{dsiaply:"flex",alignItems:"center",justifyContent:"center",width:p,height:w,boxShadow:3,overflow:"hidden",userSelect:"none",position:"relative"},children:[e.jsx(a,{sx:l=>({display:"grid",gridTemplateRows:`repeat(${k}, ${c}px)`,gridTemplateColumns:`repeat(${M}, ${c}px)`,width:p,height:w,border:"1px solid",borderColor:l.palette.background.paper}),children:z.map((l,s)=>l.map((g,C)=>{const A=jt(b.activeTetromino,s,C);return e.jsx(a,{className:g.state===V.Blink?"tetromino-cell-blink":void 0,sx:T=>({width:c,height:c,boxSizing:"border-box",background:m(A,g),boxShadow:y(g),transition:"background 0.1s"})},`${s}-${C}`)}))}),S(),i()]})},At=t=>{const n=x.useContext(W).getService(H.TetrominosGameService),[r,f]=x.useState(0);x.useEffect(()=>{if(!n)return;const i=n.onGameStatsUpdated("GameStats",p=>{f(p)});return()=>{n.offGameStatsUpdated(i)}},[n]);const h=()=>{if(!n)return null;const i=n.getGameData().nextTetromino;if(!i)return console.warn("No next tetromino available"),null;const p=32;let w=2,b=3;return(i.type==="I"||i.type==="O")&&(b=4),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(v,{variant:"body1",children:"NEXT"}),e.jsx(a,{sx:{display:"grid",gridTemplateRows:`repeat(${w}, ${p}px)`,gridTemplateColumns:`repeat(${b}, ${p}px)`,marginTop:1},children:i.shape.map((z,l)=>l>=w?null:z.map((s,g)=>g>=b?null:e.jsx(a,{sx:{width:p,height:p,backgroundColor:s?i.color:"transparent"}},`${l}-${g}`)))})]})},d=()=>e.jsxs(K.Fragment,{children:[e.jsx(a,{sx:{height:16}}),e.jsx(L,{sx:{width:"100%"}}),e.jsx(a,{sx:{height:16}})]});let c=1,u=0,m=0,y=0;if(n){const i=n.getGameData();c=i.level+1,u=i.lines,m=i.score,y=i.timeSeconds}let S="00:00";if(y>0){const i=Math.floor(y/60),p=y%60;S=`${i.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`}return e.jsx(rt,{sx:{borderRadius:2,height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(at,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[h(),d(),e.jsx(v,{variant:"body1",children:"TIME"}),e.jsx(v,{variant:"h4",children:S}),d(),e.jsx(v,{variant:"body1",children:"LEVEL"}),e.jsx(v,{variant:"h4",children:c}),d(),e.jsx(v,{variant:"body1",children:"LINES"}),e.jsx(v,{variant:"h4",children:u}),d(),e.jsx(v,{variant:"body1",children:"SCORE"}),e.jsx(v,{variant:"h4",children:m})]})})},Tt=t=>(x.useContext(W),e.jsxs(a,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(a,{sx:{height:o=>o.spacing(2)}}),e.jsxs(a,{sx:{flex:"auto",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[e.jsx(a,{sx:{height:"100%",flex:"0 0 240px",minWidth:180},children:e.jsx(Lt,{})}),e.jsx(a,{sx:{width:o=>o.spacing(2)}}),e.jsx(a,{sx:{height:"100%",flex:"0 0 auto",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Wt,{})}),e.jsx(a,{sx:{width:o=>o.spacing(2)}}),e.jsx(a,{sx:{height:"100%",flex:"0 0 240px",minWidth:180},children:e.jsx(At,{})})]}),e.jsx(a,{sx:{height:o=>o.spacing(2)}})]})),Nt=K.memo(Tt,(t,o)=>!0);export{Nt as default};
